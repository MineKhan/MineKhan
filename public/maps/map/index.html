<!DOCTYPE html>
<html>
  <head>
      <link href='https://fonts.googleapis.com/css?family=Aclonica' rel='stylesheet'>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>MineKhan&nbsp|&nbspMaps</title>
    <link rel="shortcut icon" href="/play/favicon.ico">
    <link href="/maps/style.css" rel="stylesheet" type="text/css" />
    <link href="/assets/common.css" rel="stylesheet" type="text/css" />

    <style>
      
    </style>
  </head>
<body>

<div class="header">
  <h1><img src="https://data.thingmaker.repl.co/images/minekhan.png" alt="MineKhan" border="0"></h1>
</div>

<div class="topnav">
  <a href="/maps/browse">â‡¦ Back</a>
  <a href="/">Home</a>
  <a href="/creators">Creators</a>
  <a href="/forum" style="float:right">Add a map</a>
  <a href="/play">Play</a>
</div>

<div class="row">
  <div class="leftcolumn">
    <div class="card" id="map">Loading map... <div class="loader"></div></div>
  </div>
    <div class="follow">
      <h3>Follow Us</h3>
      <p><a href="https://replit.com/@thingMaker">thingMaker</a><br>
      <a href="https://www.replit.com/@TNJS">TNJS</a><br> <br> </p>
    </div>
  </div>
</div>

<div class="footer">
  <h5>All Rights Reserved</h5>
</div>

<script>
  const urlParams = new URLSearchParams(location.search)

  var download

  fetch("/server/map/"+urlParams.get("map")).then(r => r.json()).then(map => {
    var html = ""
    if(map){
      html += "<div class='card'>"
      html += "<a><h2>Map: "+map.name+"</h2></a>"
      if(map.user) html += "By "+map.user
      if(map.description) html += "<p>"+map.description+"</p>"
      html += "Code: <input value='"+map.code+"'>"
      if(map.file){
        html += "<br><br><button onclick='download()'>Download the map</button>"
        download = function(){
          var a = document.createElement("a")
          a.href = "data:text/plain,"+map.file
          a.download = map.name+".minekhan"
          a.click()
        }
      }
      html += "</div>"
    }else location.href = "/maps/map/ /";
    document.querySelector("#map").innerHTML = html
  })
</script>
</body>
</html>



<style>
  
.loader {
  border: 5px solid white; /* Light grey */
  border-top: 5px solid gray; /* Blue */
  border-radius: 50%;
  width: 25px;
  height: 25px;
  animation: spin 2s linear infinite;
  margin-top:-22px ;
  margin-left:150px ;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>